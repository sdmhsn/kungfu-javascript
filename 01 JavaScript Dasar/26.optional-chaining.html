<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Optional Chaining</title>
</head>
<body>
    
    <script>
        /*
            optional chaining: digunakan untuk mengamankan / menangani error dari pengaksesan suatu property dari data nullish (undefined atau null)
            - menggunakan operator tanda ?. namun berbeda dengan ternary operator
            - data nullish adalah sebuah data undefined atau null
            - ketika property dari sebuah object dengan data nullish yang memang tidak ada tersebut diakses, maka akan mereturn / menghasilkan error
            - untuk mengatasi error tersebut dapat menggunakan optional chaining
        */

        /**/
        // 1. contoh data nullish
        const person = {}; // object kosong

        console.log(person.address.country); // akan menghasilkan error karena status property address adalah undefined, dan memang suatu data undefined tidak memiliki property apapun (country)

        // sekilas error data nullish diatas tidak terlihat pada halaman web, namun ketika di lihat pada console terdapat error
        // error tersebut mengakibatkan program terhenti, sehingga code yang berada dibawahnya tidak dieksekusi seperti berikut:
        document.writeln('<h1>hello world</h1>');
        
        
        /*
        // 2. untuk mengatasi error data nullish tersebut dapat menggunakan optional chaining
        const person = {};
        
        console.log(person?.address?.country); // akan bernilai undefined dan tidak menampilkan error karena menggunakan operator optional chaining (?)
        document.writeln('<h1>hello world</h1>'); // karena tidak terdapat error, maka kode dibawah optional chaining dapat dieksekusi
        */
        
        /*
        // 3. cara kerja optional chainning
        const person = {
            address: {
                country: 'Indonesia',
            }
        };
        
        console.log(person?.address?.country); // pertama cek person, apakah nullish (optional karena output pada console hanya menampilkan object kosong {}. bukan undefined). jika tidak cek yang kedua (address), apakah nullish. ketiga tampilkan value dari property terakhir. jika di person sudah nullish, maka property selanjutnya sudah undefined
        */
        
        /*
        // 4. penanganan data nullish tanpa optional chaining (kode menjadi lebih panjang)
        const person = {};
        let country;

        console.log(person.address);

        if (person.address === undefined && person.address == null) {
            country = 'Indonesia';
        }

        document.writeln(`<h1>${country}</h1>`)

        // experiment sendiri
        // const person = {};

        // if (person.address === undefined || person.address == null) {
        //     person.address = {country: 'Indonesia', province: 'East Nusa Tenggara'};
        //     console.log(person.address.country);
        //     console.log(person);
        // }

        // document.writeln(`<h1>${person.address.country}</h1>`)
        */
    </script>
</body>
</html>